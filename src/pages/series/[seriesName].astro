---
import BaseLayout from '../../layouts/BaseLayout.astro';
import Header from '../../components/Header.astro';
import Footer from '../../components/Footer.astro';
import Sidebar from '../../components/Sidebar.astro';
import type { Article } from '../../types';
import articlesData from '../../../public/articles.json';

export async function getStaticPaths() {
    const data = articlesData as any;
    const tutorialSeries = data.tutorialSeries || [];

    return tutorialSeries.map((series: any) => ({
        params: { seriesName: series.name },
        props: { series },
    }));
}

interface TutorialSeries {
    name: string;
    articles: Article[];
}

const { series } = Astro.props as { series: TutorialSeries };
---

<BaseLayout title={`${series.name} - 保羅軟體開發`} description={`主題教學：${series.name}`}>
    <Header />

    <main>
        <div class="container">
            <div class="main-content">
                <!-- Left: Articles List -->
                <div class="articles-section">
                    <h2 style="margin-bottom: 20px; color: var(--tertiary);">{series.name}</h2>

                    {series.articles.map(article => (
                        <a href={`/tutorial/${encodeURIComponent(series.name)}/${article.id}`} style="text-decoration: none;">
                            <div class="article-card">
                                <div class="article-header">
                                    <h2 class="article-title">{article.title}</h2>
                                </div>
                                <p class="article-summary">{article.summary}</p>
                            </div>
                        </a>
                    ))}
                </div>

                <!-- Right: Sidebar -->
                <Sidebar />
            </div>
        </div>
    </main>

    <Footer />
</BaseLayout>
