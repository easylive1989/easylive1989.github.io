---
import BaseLayout from '../layouts/BaseLayout.astro';
import Header from '../components/Header.astro';
import Footer from '../components/Footer.astro';
import Sidebar from '../components/Sidebar.astro';
import ArticleCard from '../components/ArticleCard.astro';
import articlesData from '../../public/articles.json';

// Pagination
const currentPage = 1;
const articlesPerPage = 10;
const totalPages = Math.ceil(articlesData.articles.length / articlesPerPage);
const startIndex = (currentPage - 1) * articlesPerPage;
const endIndex = startIndex + articlesPerPage;
const articlesToShow = articlesData.articles.slice(startIndex, endIndex);
---

<BaseLayout>
    <Header />

    <main>
        <div class="container">
            <div class="main-content">
                <!-- Left: Articles List -->
                <div class="articles-section">
                    {articlesToShow.map(article => (
                        <ArticleCard article={article} />
                    ))}

                    <!-- Pagination -->
                    {totalPages > 1 && (
                        <div class="pagination">
                            <span class="pagination-button disabled" aria-disabled="true">← 上一頁</span>
                            <span class="pagination-info">第 {currentPage} 頁 / 共 {totalPages} 頁</span>
                            <a href="/page/2" class="pagination-button">下一頁 →</a>
                        </div>
                    )}
                </div>

                <!-- Right: Sidebar -->
                <Sidebar />
            </div>
        </div>
    </main>

    <Footer />
</BaseLayout>
