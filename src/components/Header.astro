---
import articlesData from '../../public/articles.json';

const data = articlesData as any;
const tutorialSeries = data.tutorialSeries || [];
---

<header>
    <div class="container">
        <div class="header-content">
            <h1 class="site-title">
                <a href="/" style="text-decoration: none; color: inherit;">保羅軟體開發</a>
            </h1>
            <nav id="mainNav">
                <a href="/" class="nav-button">日常開發</a>
                <div class="dropdown">
                    <button class="nav-button dropdown-toggle" id="tutorialsButton">
                        主題教學 ▼
                    </button>
                    <div class="dropdown-menu" id="tutorialsMenu">
                        {tutorialSeries.map((series: any) => (
                            <a href={`/series/${encodeURIComponent(series.name)}`} class="dropdown-item">
                                {series.name}
                            </a>
                        ))}
                    </div>
                </div>
            </nav>
        </div>
    </div>
</header>

<script>
    // 主題教學下拉選單互動
    const tutorialsButton = document.getElementById('tutorialsButton');
    const tutorialsMenu = document.getElementById('tutorialsMenu');

    if (tutorialsButton && tutorialsMenu) {
        tutorialsButton.addEventListener('click', (e) => {
            e.preventDefault();
            tutorialsMenu.classList.toggle('show');
        });

        // 點擊其他地方關閉下拉選單
        document.addEventListener('click', (e) => {
            if (!(e.target as Element).closest('.dropdown')) {
                tutorialsMenu.classList.remove('show');
            }
        });
    }
</script>
